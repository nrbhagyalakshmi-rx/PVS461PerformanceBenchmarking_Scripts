DATE_FMT_TZ="YYYY-MM-DD";EXECUTION_STATUS_ENUM={SCHEDULED:"Scheduled",GENERATING:"Generating",DELIVERING:"Delivering",COMPLETED:"Completed",ERROR:"Error",WARN:"Warn"};
$(document).ready(function(){var b=$("#relatedResults").val(),c;"executionStatusPage"==b?c=executionStatusUrl:"listAllResultsPage"==b&&(c=executionAllUrl);$("#isAdmin").val();var e=$("#rxTableReportsExecutionStatus").DataTable({sPaginationType:"bootstrap",language:{url:"../assets/i18n/dataTables_"+userLocale+".json"},drawCallback:function(a){$(".reloaderBtn").removeClass("glyphicon-refresh-animate")},fnInitComplete:function(){initAlertTypeDropDown("rxTableReportsExecutionStatus",e);initReportExeuctionStatusDropDown("rxTableReportsExecutionStatus",
e);getReloader($("#rxTableReportsExecutionStatus_length"),$("#rxTableReportsExecutionStatus"));$("#executionStatus").on("change",function(){checkStatus(this)});$("#alertType").on("change",function(){checkStatus(this)})},ajax:{url:c,dataSrc:"aaData",data:function(a){a.searchString=a.search.value;0<a.order.length&&(a.direction=a.order[0].dir,a.sort=a.columns[a.order[0].column].data);0<$('select[name="executionStatus"]').size()&&(a.status=$('select[name="executionStatus"]').val());0<$('select[name="alertType"]').size()&&
(a.alertType=$('select[name="alertType"]').val())}},aaSorting:[],order:[[3,"desc"]],bLengthChange:!0,iDisplayLength:50,serverSide:!0,aLengthMenu:[[50,100,200,500],[50,100,200,500]],aoColumns:[{mData:"name",className:"col-min-150 col-max-500 cell-break"},{mData:"alertType",bSortable:!1},{mData:"frequency",bSortable:!1},{mData:"runDate",className:"col-min-150",aTargets:["runDate"],mRender:function(a,b,d){return moment(new Date(a)).tz(userTimeZone).format("lll")}},{mData:"executionTime",className:"col-min-150",
bSortable:!1,aTargets:["executionTime"],mRender:function(a,b,d){return"display"===b?(b="","-"!==a?(a=moment.duration(parseInt(a,10)),1==a.hours()?b+=Math.floor(a.hours())+$.i18n._("hour"):0!=a.hours()&&(b+=Math.floor(a.hours())+$.i18n._("hours")),1==a.minutes()?b+=" "+Math.floor(a.minutes())+$.i18n._("minute"):0!=a.minutes()&&(b+=" "+Math.floor(a.minutes())+$.i18n._("minutes")),1==a.seconds()&&0==a.milliseconds()?b+=" "+Math.floor(a.seconds())+"."+Math.floor(a.milliseconds())+$.i18n._("second"):0!=
a.seconds()&&0!=a.milliseconds()?b+=" "+Math.floor(a.seconds())+"."+Math.floor(a.milliseconds())+$.i18n._("seconds"):0==a.seconds()&&0!=a.milliseconds()&&(b+="."+Math.floor(a.milliseconds())+" seconds ")):b=a,b):a}},{mData:"owner",className:"col-min-150"},{mData:"executionStatus",sClass:"dataTableColumnCenter",aTargets:["executionStatus"],bSortable:!1,mRender:function(a,b,d){if(d.executionStatus==EXECUTION_STATUS_ENUM.SCHEDULED)return'<a tabindex="0" data-toggle="tooltip" class="fa fa-clock-o fa-lg es-scheduled popoverMessage" data-content="'+
$.i18n._("Scheduled")+'">';if(d.executionStatus==EXECUTION_STATUS_ENUM.GENERATING)return'<a tabindex="0" data-toggle="tooltip" class="fa fa-spinner fa-spin fa-lg es-generating popoverMessage" data-content="'+$.i18n._("Generating")+'">';if(d.executionStatus==EXECUTION_STATUS_ENUM.DELIVERING)return'<a tabindex="0" data-toggle="tooltip" class="fa fa-spinner fa-spin fa-lg es-delivering popoverMessage" data-content="'+$.i18n._("Delivering")+'">';if(d.executionStatus==EXECUTION_STATUS_ENUM.COMPLETED)return'<a tabindex="0"  data-toggle="tooltip" class="fa fa-check-circle-o fa-lg es-completed popoverMessage" data-content="'+
$.i18n._("Completed")+'">';if(d.errorMessage){b="Occurred on: "+moment(d.dateCreated).tz(userTimeZone).format("lll");var c;c="Details: "+d.errorMessage;if(d.executionStatus==EXECUTION_STATUS_ENUM.ERROR)return"true"==$("#isAdmin").val()?'<a tabindex="0" data-toggle="tooltip" class="fa fa-exclamation-circle fa-lg es-error popoverMessage" title="'+b+'" data-content="'+c+'">':'<a tabindex="0" class="fa fa-exclamation-circle fa-lg es-error">';if(d.executionStatus==EXECUTION_STATUS_ENUM.WARN)return"true"==
$("isAdmin").val()?'<a tabindex="0" data-toggle="tooltip" class="fa fa-exclamation-circle fa-lg es-warn popoverMessage" title="'+b+'" data-content="'+c+'">':'<a tabindex="0" data-toggle="tooltip" class="fa fa-exclamation-circle fa-lg es-warn">'}return a}}],scrollX:!0,scrollY:"50vh",columnDefs:[{targets:"_all",render:$.fn.dataTable.render.text()}]});$("#rxTableReportsExecutionStatus").on("mouseover","tr",function(){$(".popoverMessage").popover({placement:"right",trigger:"hover focus",viewport:"#rxTableReportsExecutionStatus",
html:!0})});actionButton("#rxTableReportsExecutionStatus");loadTableOption("#rxTableReportsExecutionStatus");$(".outside").hide()});function checkStatus(b){$("#rxTableReportsExecutionStatus").DataTable().order([[3,"desc"]]).draw()}function getReloader(b,c){var e;e=$('<span title="Refresh" class="glyphicon reloaderBtn glyphicon-refresh"></span>');$(b).append(e);void 0!=c&&$(".reloaderBtn").click(function(){$(".reloaderBtn").addClass("glyphicon-refresh-animate");$(c).DataTable().draw()})}
function initReportExeuctionStatusDropDown(b,c){b=$("#"+b+"_filter").parent();$("#executionStatus");b.find("select").css("height","40");b.find("label").css("margin-bottom","-2px");b.attr("class","col-xs-3");b.parent().addClass("searchToolbar");b.before($("#executionStatusDropDown"))}
function initAlertTypeDropDown(b,c){b=$("#"+b+"_filter").parent();$("#alertType");b.find("select").css("height","40");b.find("label").css("margin-bottom","-2px");b.attr("class","col-xs-3");b.parent().addClass("searchToolbar");b.before($("#alertTypeDropDown"))};